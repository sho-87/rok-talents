(this["webpackJsonprok-talents"]=this["webpackJsonprok-talents"]||[]).push([[13],{213:function(e,t,a){},214:function(e,t,a){},215:function(e,t,a){},216:function(e,t,a){},217:function(e,t,a){},218:function(e,t,a){},219:function(e,t,a){},222:function(e,t,a){"use strict";a.r(t);var o=a(16),n=a(17),s=a(19),r=a(18),i=a(0),l=a.n(i),p=a(97),c=a(202),m=a.n(c),d=a(14),u=a(13),h=a(54),v=a(201),b=a.n(v),f=a(89),g=a(221),w=(a(213),function(e){Object(s.a)(a,e);var t=Object(r.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(n.a)(a,[{key:"render",value:function(){return l.a.createElement(g.a,{placement:this.props.placement,style:this.props.style,outOfBoundaries:this.props.outOfBoundaries,arrowProps:this.props.arrowProps,className:this.props.className},l.a.createElement(g.a.Title,null,l.a.createElement("div",{className:"node-tooltip-title"},this.props.talentName),this.props.isShownTalentID&&l.a.createElement("div",{className:"node-tooltip-id"},this.props.talentID),l.a.createElement("div",{style:{clear:"both"}})),l.a.createElement(g.a.Content,{className:"node-tooltip-body"},l.a.createElement("div",{className:"node-tooltip-bg node-tooltip-bg".concat(this.props.value===this.props.max?"-max":"-next")},l.a.createElement("div",null,l.a.createElement("b",null,this.props.value!==this.props.max?"Next level:":"Maxed:")),this.props.text),!this.props.isEmbed&&l.a.createElement("div",{id:"node-tooltip-assign-container"},l.a.createElement(u.a,{className:"node-tooltip-decrease",icon:d.k,size:"2x",onClick:this.props.decreaseTalent}),l.a.createElement("span",{className:"node-tooltip-value"},this.props.value+"/"+this.props.max),l.a.createElement(u.a,{className:"node-tooltip-increase",icon:d.l,size:"2x",onClick:this.props.increaseTalent}))))}}]),a}(i.Component)),E=a(12),y=(a(214),function(e){Object(s.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).getStyle=function(){var t={};return t.top=e.props.y,t.left=e.props.x,"node-large"===e.props.type?t.backgroundImage="url(".concat("","/images/talents/").concat(e.props.image,".png)"):t.backgroundImage="url(".concat("","/images/talents/").concat(e.props.color,"GenericSmall.png)"),t},e.setTooltip=function(){var t=e.props.treeData[e.props.treeName][e.props.idx].values;return e.props.value===e.props.max?Object(E.l)(e.props.tooltip,t,e.props.max-1):Object(E.l)(e.props.tooltip,t,e.props.value)},e.increaseTalent=function(){var t=!0,a=[],o=[];(Object(E.d)(e.props.idx,e.props.fullTree,e.props.treeData[e.props.treeName],o),o=Array.from(new Set(o.reverse())),e.props.isAutoFill)?o.forEach((function(a){var o=e.props.fullTree[a-1],n=e.props.treeData[e.props.treeName][a].values.length,s=e.props.calcPointsRemaining(),r=n-o;r>s&&(t=!1,r=s,e.props.showPointLimitToast()),0!==r&&e.props.changeTalentValue(e.props.treeName,e.props.color,a,"increase",r)})):e.props.treeData[e.props.treeName][e.props.idx].prereq.forEach((function(n){o.includes(n)&&(t=!1,a.push(l.a.createElement("li",{key:n},l.a.createElement("strong",null,e.props.treeData[e.props.treeName][n].name))))}));if(t){if(e.props.value<e.props.max){var n,s=e.props.calcPointsRemaining(),r=e.props.max-e.props.value;e.props.isInstantMax?r>s?(n=s,e.props.showPointLimitToast()):n=r:0===s?(n=0,e.props.showPointLimitToast()):n=1,0!==n&&e.props.changeTalentValue(e.props.treeName,e.props.color,e.props.idx,"increase",n)}}else e.props.isAutoFill||e.props.showPrereqToast(a)},e.decreaseTalent=function(t){var a,o,n=e.props.treeData[e.props.treeName][e.props.idx].dep,s=!0,r=Object(h.a)(n);try{for(r.s();!(a=r.n()).done;){var i=a.value;if(e.props.fullTree[i-1]>0){s=!1;break}}}catch(l){r.e(l)}finally{r.f()}s&e.props.value>0&&(o=e.props.isInstantZero?e.props.value:1,e.props.changeTalentValue(e.props.treeName,e.props.color,e.props.idx,"decrease",o))},e}return Object(n.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.value!==e.value||this.props.nodeSize!==e.nodeSize||this.props.isShownValues!==e.isShownValues||this.props.isShownTalentID!==e.isShownTalentID||this.props.isSpeedMode!==e.isSpeedMode}},{key:"render",value:function(){var e=this,t="node-large"===this.props.type?.31:.21,a=this.props.isShownValues&&0!==this.props.value;return this.props.isSpeedMode?l.a.createElement(T,{talentID:this.props.treeName+this.props.idx,getStyle:this.getStyle,isShownValues:a,nodeSize:this.props.nodeSize,type:this.props.type,compressor:t,value:this.props.value,max:this.props.max,onClick:this.increaseTalent,onContextMenu:function(t){t.preventDefault(),e.decreaseTalent()}}):l.a.createElement(S,Object.assign({},this.props,{increaseTalent:this.increaseTalent,decreaseTalent:this.decreaseTalent,setTooltip:this.setTooltip,getStyle:this.getStyle,compressor:t,nodeSize:this.props.nodeSize,isShownValues:a,isEmbed:this.props.isEmbed}))}}]),a}(i.Component)),S=function(e){return l.a.createElement(f.a,{trigger:"click",placement:"right",rootClose:!0,flip:!0,delay:{show:0,hide:0},overlay:l.a.createElement(w,{calcPointsRemaining:e.calcPointsRemaining,increaseTalent:e.increaseTalent,decreaseTalent:e.decreaseTalent,isShownTalentID:e.isShownTalentID,isEmbed:e.isEmbed,idx:e.idx,talentID:e.treeName+e.idx,talentName:e.talentName,value:e.value,max:e.max,text:e.setTooltip()})},l.a.createElement(T,{talentID:e.treeName+e.idx,getStyle:e.getStyle,isShownValues:e.isShownValues,nodeSize:e.nodeSize,type:e.type,compressor:e.compressor,value:e.value,max:e.max,onContextMenu:function(e){return e.preventDefault()}}))},T=function(e){return l.a.createElement("div",{"data-testid":e.talentID,id:e.talentID,className:"node ".concat(e.type,"-").concat(e.nodeSize," ").concat(0===e.value?"node-inactive":""),style:e.getStyle(),onClick:e.onClick,onContextMenu:e.onContextMenu},e.isShownValues&&l.a.createElement(b.a,{compressor:e.compressor},l.a.createElement("div",{className:"node-value","data-testid":"node-value"},e.value+"/"+e.max)))},x=y,j=a(46),O=(a(215),function(e){Object(s.a)(a,e);var t=Object(r.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).drawNodes=function(){for(var t=[],a=e.props.treeName,o=1;o<e.props.data.length+1;o++){var n=e.props.treeData[a][o];t.push(l.a.createElement(x,{changeTalentValue:e.props.changeTalentValue,calcPointsRemaining:e.props.calcPointsRemaining,showPrereqToast:e.props.showPrereqToast,showPointLimitToast:e.props.showPointLimitToast,isShownValues:e.props.isShownValues,isShownTalentID:e.props.isShownTalentID,isSpeedMode:e.props.isSpeedMode,isInstantZero:e.props.isInstantZero,isInstantMax:e.props.isInstantMax,isAutoFill:e.props.isAutoFill,isEmbed:e.props.isEmbed,nodeSize:e.props.nodeSize,treeData:e.props.treeData,key:a+o,idx:o,treeName:a,talentName:n.name,image:n.image,tooltip:n.text,type:n.type,value:e.props.data[o-1],max:Object(E.e)(n.values),fullTree:e.props.data,x:n.pos[0]+"%",y:n.pos[1]+"%",color:e.props.color}))}return t},e}return Object(n.a)(a,[{key:"render",value:function(){return l.a.createElement(j.a,null,l.a.createElement("div",{id:"tree-".concat(this.props.color),className:"tree-container"},this.drawNodes(),this.props.isShownMouseXY&&l.a.createElement("div",{id:"tree-".concat(this.props.color,"-mouse")},"X: ",parseFloat(this.props.mouseX).toFixed(1)," Y:"," ",parseFloat(this.props.mouseY).toFixed(1))))}}]),a}(i.Component)),N=(a(216),function(e){return!!e.commander&&l.a.createElement("div",{id:"tree-center"},l.a.createElement("div",{id:"hexagon-bg"},l.a.createElement("img",{src:"".concat("","/images/ui/hexagon.png"),alt:"Commander Hexagon"})),l.a.createElement("img",{"data-testid":"hexagon-commander",id:"hexagon-commander",src:"".concat("","/images/commanders/").concat(e.commander,".png"),alt:e.commander}),l.a.createElement("div",{id:"hexagon-label-container"},l.a.createElement("div",{className:"hexagon-label hexagon-label-red"},l.a.createElement(b.a,{compressor:.7},l.a.createElement("div",null,e.isShownTotals&&l.a.createElement("div",{className:"tree-total","data-testid":"tree-total"},"(".concat(e.calcPointsSpent("red"),")")),Object(E.f)("red",e.commander)))),l.a.createElement("div",{className:"hexagon-label hexagon-label-yellow"},l.a.createElement(b.a,{compressor:.7},l.a.createElement("div",null,e.isShownTotals&&l.a.createElement("div",{className:"tree-total","data-testid":"tree-total"},"(".concat(e.calcPointsSpent("yellow"),")")),Object(E.f)("yellow",e.commander)))),l.a.createElement("div",{className:"hexagon-label hexagon-label-blue"},l.a.createElement(b.a,{compressor:.7},l.a.createElement("div",null,e.isShownTotals&&l.a.createElement("div",{className:"tree-total","data-testid":"tree-total"},"(".concat(e.calcPointsSpent("blue"),")")),Object(E.f)("blue",e.commander))))))}),P=a(8),I=(a(217),l.a.memo((function(e){var t={visibility:e.show?"visible":"hidden",fontSize:e.embed?"0.9em":""};return l.a.createElement("div",{id:"banner","data-testid":"banner",style:t},l.a.createElement("div",null,"Created at"," ",l.a.createElement("a",{href:P.f,target:"_blank",rel:"noopener noreferrer"},P.f.split("//")[1])),l.a.createElement("img",{src:"".concat("","/icon.svg"),alt:"roktalents banner"}))}))),D=a(220),k=(a(218),function(e){Object(s.a)(a,e);var t=Object(r.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).show=function(){n.setState({open:!0})},n.hide=function(){n.setState({open:!1})},n.state={open:!1},n}return Object(n.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.header!==e.header||this.props.body!==e.body||this.state.open!==t.open}},{key:"render",value:function(){return l.a.createElement(D.a,{autohide:!0,delay:3e3,show:this.state.open,onClose:this.hide},l.a.createElement(D.a.Header,null,l.a.createElement("strong",{className:"mr-auto"},this.props.header)),l.a.createElement(D.a.Body,null,this.props.body))}}]),a}(i.Component)),C=function(e){Object(s.a)(a,e);var t=Object(r.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).show=function(){n.setState({open:!0})},n.hide=function(){n.setState({open:!1})},n.state={open:!1},n}return Object(n.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.msg!==e.msg||this.state.open!==t.open}},{key:"render",value:function(){return l.a.createElement(D.a,{autohide:!0,delay:4e3,show:this.state.open,onClose:this.hide},l.a.createElement(D.a.Header,null,l.a.createElement("strong",{className:"mr-auto"},"Incomplete Talents")),l.a.createElement(D.a.Body,null,"Upgrade talents to the maximum level first:",this.props.msg))}}]),a}(i.Component),M=(a(219),function(e){Object(s.a)(a,e);var t=Object(r.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).resetPanZoom=function(){n.panZoomInstance.moveTo(0,0),n.panZoomInstance.zoomAbs(0,0,1)},n.repaint=function(){p.jsPlumb.repaintEverything()},n.drawLines=function(){n.props.commander&&(p.jsPlumb.deleteEveryEndpoint(),p.jsPlumb.setSuspendDrawing(!0),["red","yellow","blue"].forEach((function(e){var t=Object(E.f)(e,n.props.commander);Object.keys(n.props.treeData[t]).forEach((function(a){var o=0===n.props[e][a-1]?"":"line-".concat(e);n.props.treeData[t][a].prereq.forEach((function(e){p.jsPlumb.connect({source:document.getElementById("".concat(t).concat(a)),target:document.getElementById("".concat(t).concat(e)),endpoint:["Dot",{cssClass:"line-endpoint",radius:1}],connector:["Straight",{cssClass:"line ".concat(o)}],anchors:[["Perimeter",{shape:"Circle"}],["Perimeter",{shape:"Circle"}]]})}))}))})),p.jsPlumb.setSuspendDrawing(!1,!0))},n.toggleMouseListeners=function(){n.props.isShownMouseXY?window.addEventListener("mousemove",n.setMousePosition):window.removeEventListener("mousemove",n.setMousePosition)},n.setMousePosition=function(e){var t=document.getElementById("tree-red").getBoundingClientRect(),a=document.getElementById("tree-yellow").getBoundingClientRect(),o=document.getElementById("tree-blue").getBoundingClientRect();setTimeout(n.setState({redX:(e.clientX-t.left+window.scrollX)/t.width*100,redY:(e.clientY-t.top+window.scrollY)/t.height*100,yellowX:(e.clientX-a.left+window.scrollX)/a.width*100,yellowY:(e.clientY-a.top+window.scrollY)/a.height*100,blueX:(e.clientX-o.left+window.scrollX)/o.width*100,blueY:(e.clientY-o.top+window.scrollY)/o.height*100}),2e3)},n.showPrereqToast=function(e){n.setState({prereqMsg:e},(function(){n.prereqToastRef.show()}))},n.showPointLimitToast=function(){n.pointLimitToastRef.show()},n.state={prereqMsg:""},n}return Object(n.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.repaint);var e=this;if(p.jsPlumb.ready((function(){p.jsPlumb.setContainer(document.getElementById("tree-square-content")),e.drawLines()})),!Object(E.j)()){var t=document.querySelector("#tree-square-content");this.panZoomInstance=m()(t,{minZoom:1,maxZoom:3,pinchSpeed:.5,zoomDoubleClickSpeed:1,bounds:!0,boundsPadding:.5,smoothScroll:!1,onTouch:function(e){return!1},filterKey:function(e){return!0}}),this.panZoomInstance.on("transform",(function(e){document.body.click()}))}}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.repaint)}},{key:"render",value:function(){var e=this,t={changeTalentValue:this.props.changeTalentValue,calcPointsRemaining:this.props.calcPointsRemaining,showPrereqToast:this.showPrereqToast,showPointLimitToast:this.showPointLimitToast,isShownValues:this.props.isShownValues,isShownMouseXY:this.props.isShownMouseXY,isShownTalentID:this.props.isShownTalentID,isSpeedMode:this.props.isSpeedMode,isInstantZero:this.props.isInstantZero,isInstantMax:this.props.isInstantMax,isAutoFill:this.props.isAutoFill,nodeSize:this.props.nodeSize,treeData:this.props.treeData,commander:this.props.commander};return l.a.createElement("div",{id:"tree-panel","data-testid":"tree-panel"},l.a.createElement(C,{ref:function(t){return e.prereqToastRef=t},msg:this.state.prereqMsg}),l.a.createElement(k,{ref:function(t){return e.pointLimitToastRef=t},header:"Talent Limit",body:"You have spent the maximum number of talent points"}),this.props.dataVersion<P.d&&l.a.createElement("div",{"data-testid":"version-warning",id:"version-warning"},"Warning: this build uses an ",l.a.createElement("br",null)," old version of the game data"),this.props.isEmbed?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{"data-testid":"embed-message",id:"embed-message"},"View full build:"," ",l.a.createElement("a",{href:Object(E.g)(),target:"_blank",rel:"noopener noreferrer"},Object(E.a)(this.props.commander,this.props.red,this.props.yellow,this.props.blue),l.a.createElement(u.a,{id:"external-icon",icon:d.g}))),l.a.createElement(I,{show:!0,embed:!0})):l.a.createElement(I,{show:!1,embed:!1}),l.a.createElement("div",{id:"tree-square-container"},l.a.createElement("div",{id:"tree-square-section"},l.a.createElement("div",{id:"tree-square-content"},l.a.createElement(O,Object.assign({},t,{color:"red",treeName:Object(E.f)("red",this.props.commander),data:this.props.red,mouseX:this.state.redX,mouseY:this.state.redY,isEmbed:this.props.isEmbed})),l.a.createElement(O,Object.assign({},t,{color:"yellow",treeName:Object(E.f)("yellow",this.props.commander),data:this.props.yellow,mouseX:this.state.yellowX,mouseY:this.state.yellowY,isEmbed:this.props.isEmbed})),l.a.createElement(O,Object.assign({},t,{color:"blue",treeName:Object(E.f)("blue",this.props.commander),data:this.props.blue,mouseX:this.state.blueX,mouseY:this.state.blueY,isEmbed:this.props.isEmbed})),l.a.createElement(N,{calcPointsSpent:this.props.calcPointsSpent,isShownTotals:this.props.isShownTotals&&this.props.commander,commander:this.props.commander||"unknown"})))))}}]),a}(i.Component));t.default=M}}]);
//# sourceMappingURL=13.a92673d1.chunk.js.map