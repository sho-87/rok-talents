{"version":3,"sources":["Popovers.js","Node.js","Tree.js","Hexagon.js","Banner.js","Toasts.js","TreePanel.js"],"names":["TalentTooltip","Popover","placement","this","props","style","outOfBoundaries","arrowProps","className","Title","talentName","isShownTalentID","talentID","clear","Content","value","max","text","isEmbed","id","icon","faMinusSquare","size","onClick","decreaseTalent","faPlusSquare","increaseTalent","Component","Node","getStyle","top","y","left","x","type","backgroundImage","process","image","color","setTooltip","talentValues","treeData","treeName","idx","replaceTalentText","tooltip","directPrereqsOK","directInfo","incompletePrereqs","getIncompletePrereqs","fullTree","Array","from","Set","reverse","isAutoFill","forEach","prereq","prereqValue","prereqMax","values","length","pointsRemaining","calcPointsRemaining","numberAssignable","showPointLimitToast","changeTalentValue","includes","push","key","name","pointDifference","isInstantMax","showPrereqToast","e","numberRemovable","deps","dep","depsOK","isInstantZero","nextProps","nextState","nodeSize","isShownValues","isSpeedMode","compressor","onContextMenu","preventDefault","NodeOverlay","OverlayTrigger","trigger","rootClose","flip","delay","show","hide","overlay","NodeContent","data-testid","Tree","drawNodes","nodes","i","data","curNode","getMaxTalentCount","Error","isShownMouseXY","parseFloat","mouseX","toFixed","mouseY","Hexagon","commander","src","alt","isShownTotals","calcPointsSpent","getTreeName","Banner","React","memo","visibility","fontSize","embed","href","homepage","target","rel","split","ToastMessage","setState","open","state","header","body","Toast","autohide","onClose","Header","Body","PrereqToast","msg","TreePanel","resetPanZoom","panZoomInstance","moveTo","zoomAbs","repaint","jsPlumb","repaintEverything","drawLines","deleteEveryEndpoint","setSuspendDrawing","Object","keys","nodeID","activateState","connect","source","document","getElementById","endpoint","cssClass","radius","connector","anchors","shape","toggleMouseListeners","window","addEventListener","setMousePosition","removeEventListener","redContainer","getBoundingClientRect","yellowContainer","blueContainer","setTimeout","redX","clientX","scrollX","width","redY","clientY","scrollY","height","yellowX","yellowY","blueX","blueY","prereqMsg","prereqToastRef","pointLimitToastRef","this_","ready","setContainer","isTouchDevice","panZoomContainer","querySelector","panzoom","minZoom","maxZoom","pinchSpeed","zoomDoubleClickSpeed","bounds","boundsPadding","smoothScroll","onTouch","filterKey","on","click","sharedTreeProps","ref","component","dataVersion","getURL","createSummaryString","red","yellow","blue","faExternalLinkAlt"],"mappings":"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","file":"static/js/13.a29bf60d.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport Popover from 'react-bootstrap/Popover';\nimport { faPlusSquare, faMinusSquare } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nimport './styles/Popovers.css';\n\n/**\n * Tooltip containing information about each talent node. Displayed when \n user hovers over a talent\n *\n */\nexport class TalentTooltip extends Component {\n  render() {\n    return (\n      <Popover\n        placement={this.props.placement}\n        style={this.props.style}\n        outOfBoundaries={this.props.outOfBoundaries}\n        arrowProps={this.props.arrowProps}\n        className={this.props.className}\n      >\n        <Popover.Title>\n          <div className=\"node-tooltip-title\">{this.props.talentName}</div>\n          {this.props.isShownTalentID && (\n            <div className=\"node-tooltip-id\">{this.props.talentID}</div>\n          )}\n          <div style={{ clear: 'both' }}></div>\n        </Popover.Title>\n\n        <Popover.Content className=\"node-tooltip-body\">\n          <div\n            className={`node-tooltip-bg node-tooltip-bg${\n              this.props.value === this.props.max ? '-max' : '-next'\n            }`}\n          >\n            <div>\n              <b>\n                {this.props.value !== this.props.max ? 'Next level:' : 'Maxed:'}\n              </b>\n            </div>\n\n            {this.props.text}\n          </div>\n          {!this.props.isEmbed && (\n            <div id=\"node-tooltip-assign-container\">\n              <FontAwesomeIcon\n                className=\"node-tooltip-decrease\"\n                icon={faMinusSquare}\n                size=\"2x\"\n                onClick={this.props.decreaseTalent}\n              />\n\n              <span className=\"node-tooltip-value\">\n                {this.props.value + '/' + this.props.max}\n              </span>\n\n              <FontAwesomeIcon\n                className=\"node-tooltip-increase\"\n                icon={faPlusSquare}\n                size=\"2x\"\n                onClick={this.props.increaseTalent}\n              />\n            </div>\n          )}\n        </Popover.Content>\n      </Popover>\n    );\n  }\n}\n\nexport default { TalentTooltip };\n","import React, { Component } from 'react';\nimport FitText from '@kennethormandy/react-fittext';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport { TalentTooltip } from './Popovers';\nimport { replaceTalentText, getIncompletePrereqs } from './utils';\n\nimport './styles/Node.css';\n\n/**\n * Component for the individual talent nodes\n *\n * @class Node\n * @extends {Component}\n */\nclass Node extends Component {\n  shouldComponentUpdate(nextProps, nextState) {\n    if (\n      this.props.value !== nextProps.value ||\n      this.props.nodeSize !== nextProps.nodeSize ||\n      this.props.isShownValues !== nextProps.isShownValues ||\n      this.props.isShownTalentID !== nextProps.isShownTalentID ||\n      this.props.isSpeedMode !== nextProps.isSpeedMode\n    ) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  /**\n   * Determine styling of the node. Image depends on whether the node is\n   * a large skill node or a small stat node\n   *\n   * @returns {object} Object containing the CSS styles\n   * (e.g. positioning, background image) for the node\n   * @memberof Node\n   */\n  getStyle = () => {\n    let style = {};\n\n    style.top = this.props.y;\n    style.left = this.props.x;\n\n    if (this.props.type === 'node-large') {\n      style.backgroundImage = `url(${process.env.PUBLIC_URL}/images/talents/${this.props.image}.png)`;\n    } else {\n      style.backgroundImage = `url(${process.env.PUBLIC_URL}/images/talents/${this.props.color}GenericSmall.png)`;\n    }\n\n    return style;\n  };\n\n  /**\n   * Set tooltip for the node. Tooltip text is dynamic as it depends on the\n   * current level of the node\n   *\n   * @returns {string} Updated tooltip text reflecting the level of the node\n   * @memberof Node\n   */\n  setTooltip = () => {\n    let tooltip;\n    let talentValues = this.props.treeData[this.props.treeName][this.props.idx][\n      'values'\n    ];\n\n    if (this.props.value === this.props.max) {\n      tooltip = replaceTalentText(\n        this.props.tooltip,\n        talentValues,\n        this.props.max - 1\n      );\n    } else {\n      tooltip = replaceTalentText(\n        this.props.tooltip,\n        talentValues,\n        this.props.value\n      );\n    }\n\n    return tooltip;\n  };\n\n  /**\n   * Increase the value of the clicked node. Controls whether the node can\n   * be increased (e.g. max level reached, max talent points spent), as well\n   * as the display of associated toasts and missing prerequisite talents\n   *\n   * @memberof Node\n   */\n  increaseTalent = () => {\n    // Get all incomplete prereqs\n    let directPrereqsOK = true;\n    let directInfo = [];\n    let incompletePrereqs = [];\n    getIncompletePrereqs(\n      this.props.idx,\n      this.props.fullTree,\n      this.props.treeData[this.props.treeName],\n      incompletePrereqs\n    );\n    incompletePrereqs = Array.from(new Set(incompletePrereqs.reverse()));\n\n    // Handle autofill mode (incomplete nodes only)\n    if (this.props.isAutoFill) {\n      incompletePrereqs.forEach((prereq) => {\n        const prereqValue = this.props.fullTree[prereq - 1];\n        const prereqMax = this.props.treeData[this.props.treeName][prereq]\n          .values.length;\n        const pointsRemaining = this.props.calcPointsRemaining();\n\n        let numberAssignable = prereqMax - prereqValue;\n        if (numberAssignable > pointsRemaining) {\n          directPrereqsOK = false;\n          numberAssignable = pointsRemaining;\n          this.props.showPointLimitToast();\n        }\n\n        if (numberAssignable !== 0) {\n          this.props.changeTalentValue(\n            this.props.treeName,\n            this.props.color,\n            prereq,\n            'increase',\n            numberAssignable\n          );\n        }\n      });\n    } else {\n      // No autofill. Check direct prereqs for this node\n      const directPrereqs = this.props.treeData[this.props.treeName][\n        this.props.idx\n      ].prereq;\n\n      directPrereqs.forEach((idx) => {\n        if (incompletePrereqs.includes(idx)) {\n          directPrereqsOK = false;\n          directInfo.push(\n            <li key={idx}>\n              <strong>\n                {this.props.treeData[this.props.treeName][idx].name}\n              </strong>\n            </li>\n          );\n        }\n      });\n    }\n\n    // Set value for selected node\n    if (directPrereqsOK) {\n      if (this.props.value < this.props.max) {\n        const pointsRemaining = this.props.calcPointsRemaining();\n        const pointDifference = this.props.max - this.props.value;\n        let numberAssignable;\n\n        if (this.props.isInstantMax) {\n          if (pointDifference > pointsRemaining) {\n            numberAssignable = pointsRemaining;\n            this.props.showPointLimitToast();\n          } else {\n            numberAssignable = pointDifference;\n          }\n        } else {\n          if (pointsRemaining === 0) {\n            numberAssignable = 0;\n            this.props.showPointLimitToast();\n          } else {\n            numberAssignable = 1;\n          }\n        }\n\n        if (numberAssignable !== 0) {\n          this.props.changeTalentValue(\n            this.props.treeName,\n            this.props.color,\n            this.props.idx,\n            'increase',\n            numberAssignable\n          );\n        }\n      }\n    } else if (!this.props.isAutoFill) {\n      this.props.showPrereqToast(directInfo);\n    }\n  };\n\n  /**\n   * Decrease value of the clicked node and update `this.state` to reflect\n   * the new value. Checks whether the node can be decreased in the event of\n   * having dependent nodes. Context menu is disabled\n   *\n   * @param {MouseEvent} e Mouse context event\n   * @memberof Node\n   */\n  decreaseTalent = (e) => {\n    // Check dependent nodes\n    const deps = this.props.treeData[this.props.treeName][this.props.idx].dep;\n\n    let depsOK = true;\n\n    for (let idx of deps) {\n      const depValue = this.props.fullTree[idx - 1];\n      if (depValue > 0) {\n        depsOK = false;\n        break;\n      }\n    }\n\n    if (depsOK & (this.props.value > 0)) {\n      let numberRemovable;\n\n      if (this.props.isInstantZero) {\n        numberRemovable = this.props.value;\n      } else {\n        numberRemovable = 1;\n      }\n\n      this.props.changeTalentValue(\n        this.props.treeName,\n        this.props.color,\n        this.props.idx,\n        'decrease',\n        numberRemovable\n      );\n    }\n  };\n\n  render() {\n    let compressor = this.props.type === 'node-large' ? 0.31 : 0.21;\n    let isShownValues = this.props.isShownValues && this.props.value !== 0;\n\n    if (this.props.isSpeedMode) {\n      return (\n        <NodeContent\n          talentID={this.props.treeName + this.props.idx}\n          getStyle={this.getStyle}\n          isShownValues={isShownValues}\n          nodeSize={this.props.nodeSize}\n          type={this.props.type}\n          compressor={compressor}\n          value={this.props.value}\n          max={this.props.max}\n          onClick={this.increaseTalent}\n          onContextMenu={(e) => {\n            e.preventDefault();\n            this.decreaseTalent();\n          }}\n        />\n      );\n    } else {\n      return (\n        <NodeOverlay\n          {...this.props}\n          increaseTalent={this.increaseTalent}\n          decreaseTalent={this.decreaseTalent}\n          setTooltip={this.setTooltip}\n          getStyle={this.getStyle}\n          compressor={compressor}\n          nodeSize={this.props.nodeSize}\n          isShownValues={isShownValues}\n          isEmbed={this.props.isEmbed}\n        />\n      );\n    }\n  }\n}\n\nconst NodeOverlay = (props) => {\n  return (\n    <OverlayTrigger\n      trigger=\"click\"\n      placement=\"right\"\n      rootClose={true}\n      flip={true}\n      delay={{ show: 0, hide: 0 }}\n      overlay={\n        <TalentTooltip\n          calcPointsRemaining={props.calcPointsRemaining}\n          increaseTalent={props.increaseTalent}\n          decreaseTalent={props.decreaseTalent}\n          isShownTalentID={props.isShownTalentID}\n          isEmbed={props.isEmbed}\n          idx={props.idx}\n          talentID={props.treeName + props.idx}\n          talentName={props.talentName}\n          value={props.value}\n          max={props.max}\n          text={props.setTooltip()}\n        />\n      }\n    >\n      <NodeContent\n        talentID={props.treeName + props.idx}\n        getStyle={props.getStyle}\n        isShownValues={props.isShownValues}\n        nodeSize={props.nodeSize}\n        type={props.type}\n        compressor={props.compressor}\n        value={props.value}\n        max={props.max}\n        onContextMenu={(e) => e.preventDefault()}\n      />\n    </OverlayTrigger>\n  );\n};\n\nconst NodeContent = (props) => {\n  return (\n    <div\n      data-testid={props.talentID}\n      id={props.talentID}\n      className={`node ${props.type}-${props.nodeSize} ${\n        props.value === 0 ? 'node-inactive' : ''\n      }`}\n      style={props.getStyle()}\n      onClick={props.onClick}\n      onContextMenu={props.onContextMenu}\n    >\n      {props.isShownValues && (\n        <FitText compressor={props.compressor}>\n          <div className=\"node-value\" data-testid=\"node-value\">\n            {props.value + '/' + props.max}\n          </div>\n        </FitText>\n      )}\n    </div>\n  );\n};\n\nexport default Node;\n","import React, { Component } from 'react';\nimport Node from './Node';\nimport ErrorBoundary from './Error';\nimport { getMaxTalentCount } from './utils';\nimport './styles/Tree.css';\n\n/**\n * Component for the individual talent trees\n *\n * @class Tree\n * @extends {Component}\n */\n\nclass Tree extends Component {\n  /**\n   * Create an array of all talent nodes for the current commander\n   *\n   * @returns {Array} Array of `Node`'s for a given tree\n   * @memberof Tree\n   */\n  drawNodes = () => {\n    let nodes = [];\n    const treeName = this.props.treeName;\n\n    for (let i = 1; i < this.props.data.length + 1; i++) {\n      var curNode = this.props.treeData[treeName][i];\n\n      nodes.push(\n        <Node\n          changeTalentValue={this.props.changeTalentValue}\n          calcPointsRemaining={this.props.calcPointsRemaining}\n          showPrereqToast={this.props.showPrereqToast}\n          showPointLimitToast={this.props.showPointLimitToast}\n          isShownValues={this.props.isShownValues}\n          isShownTalentID={this.props.isShownTalentID}\n          isSpeedMode={this.props.isSpeedMode}\n          isInstantZero={this.props.isInstantZero}\n          isInstantMax={this.props.isInstantMax}\n          isAutoFill={this.props.isAutoFill}\n          isEmbed={this.props.isEmbed}\n          nodeSize={this.props.nodeSize}\n          treeData={this.props.treeData}\n          key={treeName + i}\n          idx={i}\n          treeName={treeName}\n          talentName={curNode['name']}\n          image={curNode['image']}\n          tooltip={curNode['text']}\n          type={curNode['type']}\n          value={this.props.data[i - 1]}\n          max={getMaxTalentCount(curNode['values'])}\n          fullTree={this.props.data}\n          x={curNode['pos'][0] + '%'}\n          y={curNode['pos'][1] + '%'}\n          color={this.props.color}\n        />\n      );\n    }\n\n    return nodes;\n  };\n\n  render() {\n    return (\n      <ErrorBoundary>\n        <div id={`tree-${this.props.color}`} className=\"tree-container\">\n          {this.drawNodes()}\n\n          {this.props.isShownMouseXY && (\n            <div id={`tree-${this.props.color}-mouse`}>\n              X: {parseFloat(this.props.mouseX).toFixed(1)} Y:{' '}\n              {parseFloat(this.props.mouseY).toFixed(1)}\n            </div>\n          )}\n        </div>\n      </ErrorBoundary>\n    );\n  }\n}\n\nexport default Tree;\n","import React from 'react';\nimport FitText from '@kennethormandy/react-fittext';\nimport { getTreeName } from './utils';\nimport './styles/Hexagon.css';\n\nconst Hexagon = (props) => {\n  if (props.commander) {\n    return (\n      <div id=\"tree-center\">\n        <div id=\"hexagon-bg\">\n          <img\n            src={`${process.env.PUBLIC_URL}/images/ui/hexagon.png`}\n            alt={'Commander Hexagon'}\n          ></img>\n        </div>\n\n        <img\n          data-testid=\"hexagon-commander\"\n          id=\"hexagon-commander\"\n          src={`${process.env.PUBLIC_URL}/images/commanders/${props.commander}.png`}\n          alt={props.commander}\n        ></img>\n\n        <div id=\"hexagon-label-container\">\n          <div className=\"hexagon-label hexagon-label-red\">\n            <FitText compressor={0.7}>\n              <div>\n                {props.isShownTotals && (\n                  <div\n                    className=\"tree-total\"\n                    data-testid=\"tree-total\"\n                  >{`(${props.calcPointsSpent('red')})`}</div>\n                )}\n                {getTreeName('red', props.commander)}\n              </div>\n            </FitText>\n          </div>\n\n          <div className=\"hexagon-label hexagon-label-yellow\">\n            <FitText compressor={0.7}>\n              <div>\n                {props.isShownTotals && (\n                  <div\n                    className=\"tree-total\"\n                    data-testid=\"tree-total\"\n                  >{`(${props.calcPointsSpent('yellow')})`}</div>\n                )}\n                {getTreeName('yellow', props.commander)}\n              </div>\n            </FitText>\n          </div>\n\n          <div className=\"hexagon-label hexagon-label-blue\">\n            <FitText compressor={0.7}>\n              <div>\n                {props.isShownTotals && (\n                  <div\n                    className=\"tree-total\"\n                    data-testid=\"tree-total\"\n                  >{`(${props.calcPointsSpent('blue')})`}</div>\n                )}\n                {getTreeName('blue', props.commander)}\n              </div>\n            </FitText>\n          </div>\n        </div>\n      </div>\n    );\n  } else {\n    return false;\n  }\n};\n\nexport default Hexagon;\n","import React from 'react';\nimport { homepage } from '../package.json';\nimport './styles/Banner.css';\n\nconst Banner = React.memo(props => {\n  const style = {\n    visibility: props.show ? 'visible' : 'hidden',\n    fontSize: props.embed ? '0.9em' : ''\n  };\n\n  return (\n    <div id=\"banner\" data-testid=\"banner\" style={style}>\n      <div>\n        Created at{' '}\n        <a href={homepage} target=\"_blank\" rel=\"noopener noreferrer\">\n          {homepage.split('//')[1]}\n        </a>\n      </div>\n      <img\n        src={`${process.env.PUBLIC_URL}/icon.svg`}\n        alt=\"roktalents banner\"\n      ></img>\n    </div>\n  );\n});\n\nexport default Banner;\n","import React, { Component } from 'react';\nimport Toast from 'react-bootstrap/Toast';\nimport './styles/Toasts.css';\n\n/**\n * Generic toast component\n *\n * @class ToastMessage\n * @extends {Component}\n */\nexport class ToastMessage extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { open: false };\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (\n      this.props.header !== nextProps.header ||\n      this.props.body !== nextProps.body ||\n      this.state.open !== nextState.open\n    ) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  show = () => {\n    this.setState({ open: true });\n  };\n\n  hide = () => {\n    this.setState({ open: false });\n  };\n\n  render() {\n    return (\n      <Toast autohide delay={3000} show={this.state.open} onClose={this.hide}>\n        <Toast.Header>\n          <strong className=\"mr-auto\">{this.props.header}</strong>\n        </Toast.Header>\n        <Toast.Body>{this.props.body}</Toast.Body>\n      </Toast>\n    );\n  }\n}\n\n/**\n * Toast showing warning message about missing talents that need to be\n * completed prior to the select talent.\n *\n * @class PrereqToast\n * @extends {Component}\n */\nexport class PrereqToast extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { open: false };\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (\n      this.props.msg !== nextProps.msg ||\n      this.state.open !== nextState.open\n    ) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  show = () => {\n    this.setState({ open: true });\n  };\n\n  hide = () => {\n    this.setState({ open: false });\n  };\n\n  render() {\n    return (\n      <Toast autohide delay={4000} show={this.state.open} onClose={this.hide}>\n        <Toast.Header>\n          <strong className=\"mr-auto\">Incomplete Talents</strong>\n        </Toast.Header>\n        <Toast.Body>\n          Upgrade talents to the maximum level first:\n          {this.props.msg}\n        </Toast.Body>\n      </Toast>\n    );\n  }\n}\n\nexport default { ToastMessage, PrereqToast };\n","import React, { Component } from 'react';\nimport { jsPlumb } from 'jsplumb';\nimport panzoom from 'panzoom';\nimport { faExternalLinkAlt } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport Tree from './Tree';\nimport Hexagon from './Hexagon';\nimport Banner from './Banner';\nimport { PrereqToast, ToastMessage } from './Toasts';\nimport {\n  createSummaryString,\n  getTreeName,\n  getURL,\n  isTouchDevice\n} from './utils';\n\nimport { dataVersion } from '../package.json';\nimport './styles/TreePanel.css';\n\n/**\n * Component for the main tree panel. Controls the display of all nodes and\n * node selections\n *\n * @class TreePanel\n * @extends {Component}\n */\nclass TreePanel extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      prereqMsg: ''\n    };\n  }\n\n  /**\n   * Add event listeners and setup jsplumb container with initial lines\n   *\n   * @memberof TreePanel\n   */\n  componentDidMount() {\n    window.addEventListener('resize', this.repaint);\n\n    const this_ = this;\n\n    jsPlumb.ready(function() {\n      jsPlumb.setContainer(document.getElementById('tree-square-content'));\n      this_.drawLines();\n    });\n\n    if (!isTouchDevice()) {\n      let panZoomContainer = document.querySelector('#tree-square-content');\n      this.panZoomInstance = panzoom(panZoomContainer, {\n        minZoom: 1,\n        maxZoom: 3,\n        pinchSpeed: 0.5,\n        zoomDoubleClickSpeed: 1,\n        bounds: true,\n        boundsPadding: 0.5,\n        smoothScroll: false,\n        onTouch: function(e) {\n          return false;\n        },\n        filterKey: function(e) {\n          return true;\n        }\n      });\n\n      // This has the effect of closing any open popovers\n      this.panZoomInstance.on('transform', function(e) {\n        document.body.click();\n      });\n    }\n  }\n\n  /**\n   * Remove event listeners on unmount\n   *\n   * @memberof TreePanel\n   */\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.repaint);\n  }\n\n  /**\n   * Reset the pan/zoom state of the entire tree panel. Called on commander changes\n   * and talent resets\n   *\n   * @memberof TreePanel\n   */\n  resetPanZoom = () => {\n    this.panZoomInstance.moveTo(0, 0);\n    this.panZoomInstance.zoomAbs(0, 0, 1);\n  };\n\n  /**\n   * Call for repainting jsplumb lines on window resize\n   *\n   * @memberof TreePanel\n   */\n  repaint = () => {\n    jsPlumb.repaintEverything();\n  };\n\n  /**\n   * Draw lines between nodes\n   *\n   * @memberof TreePanel\n   */\n  drawLines = () => {\n    if (this.props.commander) {\n      jsPlumb.deleteEveryEndpoint();\n      jsPlumb.setSuspendDrawing(true);\n\n      ['red', 'yellow', 'blue'].forEach(color => {\n        const treeName = getTreeName(color, this.props.commander);\n\n        Object.keys(this.props.treeData[treeName]).forEach(nodeID => {\n          var activateState =\n            this.props[color][nodeID - 1] === 0 ? '' : `line-${color}`;\n\n          this.props.treeData[treeName][nodeID].prereq.forEach(prereq => {\n            jsPlumb.connect({\n              source: document.getElementById(`${treeName}${nodeID}`),\n              target: document.getElementById(`${treeName}${prereq}`),\n              endpoint: ['Dot', { cssClass: 'line-endpoint', radius: 1 }],\n              connector: ['Straight', { cssClass: `line ${activateState}` }],\n              anchors: [\n                ['Perimeter', { shape: 'Circle' }],\n                ['Perimeter', { shape: 'Circle' }]\n              ]\n            });\n          });\n        });\n      });\n\n      jsPlumb.setSuspendDrawing(false, true);\n    }\n  };\n\n  /**\n   * Toggle event listeners for setting mouse position\n   *\n   * @memberof TreePanel\n   */\n  toggleMouseListeners = () => {\n    if (this.props.isShownMouseXY) {\n      window.addEventListener('mousemove', this.setMousePosition);\n    } else {\n      window.removeEventListener('mousemove', this.setMousePosition);\n    }\n  };\n\n  /**\n   * Store mouse position relative to each tree container\n   *\n   * @param {MouseEvent} e Mouse move event\n   * @memberof TreePanel\n   */\n  setMousePosition = e => {\n    const redContainer = document\n      .getElementById('tree-red')\n      .getBoundingClientRect();\n\n    const yellowContainer = document\n      .getElementById('tree-yellow')\n      .getBoundingClientRect();\n\n    const blueContainer = document\n      .getElementById('tree-blue')\n      .getBoundingClientRect();\n\n    setTimeout(\n      this.setState({\n        redX:\n          ((e.clientX - redContainer.left + window.scrollX) /\n            redContainer.width) *\n          100,\n        redY:\n          ((e.clientY - redContainer.top + window.scrollY) /\n            redContainer.height) *\n          100,\n        yellowX:\n          ((e.clientX - yellowContainer.left + window.scrollX) /\n            yellowContainer.width) *\n          100,\n        yellowY:\n          ((e.clientY - yellowContainer.top + window.scrollY) /\n            yellowContainer.height) *\n          100,\n        blueX:\n          ((e.clientX - blueContainer.left + window.scrollX) /\n            blueContainer.width) *\n          100,\n        blueY:\n          ((e.clientY - blueContainer.top + window.scrollY) /\n            blueContainer.height) *\n          100\n      }),\n      2000\n    );\n  };\n\n  /**\n   * Show a toast containing a list of missing prerequisite talents. Toast is\n   * hidden automatically after a delay.\n   *\n   * @memberof TreePanel\n   */\n  showPrereqToast = msg => {\n    this.setState({ prereqMsg: msg }, () => {\n      this.prereqToastRef.show();\n    });\n  };\n\n  /**\n   * Show toast warning about reaching the maximum talent point limit. Toast\n   * is hidden automatically after a delay.\n   *\n   * @memberof TreePanel\n   */\n  showPointLimitToast = () => {\n    this.pointLimitToastRef.show();\n  };\n\n  render() {\n    const sharedTreeProps = {\n      changeTalentValue: this.props.changeTalentValue,\n      calcPointsRemaining: this.props.calcPointsRemaining,\n      showPrereqToast: this.showPrereqToast,\n      showPointLimitToast: this.showPointLimitToast,\n      isShownValues: this.props.isShownValues,\n      isShownMouseXY: this.props.isShownMouseXY,\n      isShownTalentID: this.props.isShownTalentID,\n      isSpeedMode: this.props.isSpeedMode,\n      isInstantZero: this.props.isInstantZero,\n      isInstantMax: this.props.isInstantMax,\n      isAutoFill: this.props.isAutoFill,\n      nodeSize: this.props.nodeSize,\n      treeData: this.props.treeData,\n      commander: this.props.commander\n    };\n\n    return (\n      <div id=\"tree-panel\" data-testid=\"tree-panel\">\n        <PrereqToast\n          ref={component => (this.prereqToastRef = component)}\n          msg={this.state.prereqMsg}\n        />\n        <ToastMessage\n          ref={component => (this.pointLimitToastRef = component)}\n          header=\"Talent Limit\"\n          body=\"You have spent the maximum number of talent points\"\n        />\n\n        {this.props.dataVersion < dataVersion && (\n          <div data-testid=\"version-warning\" id=\"version-warning\">\n            Warning: this build uses an <br /> old version of the game data\n          </div>\n        )}\n\n        {this.props.isEmbed ? (\n          <>\n            <div data-testid=\"embed-message\" id=\"embed-message\">\n              View full build:{' '}\n              <a href={getURL()} target=\"_blank\" rel=\"noopener noreferrer\">\n                {createSummaryString(\n                  this.props.commander,\n                  this.props.red,\n                  this.props.yellow,\n                  this.props.blue\n                )}\n                <FontAwesomeIcon id=\"external-icon\" icon={faExternalLinkAlt} />\n              </a>\n            </div>\n            <Banner show={true} embed={true} />\n          </>\n        ) : (\n          <Banner show={false} embed={false} />\n        )}\n\n        <div id=\"tree-square-container\">\n          <div id=\"tree-square-section\">\n            <div id=\"tree-square-content\">\n              <Tree\n                {...sharedTreeProps}\n                color={'red'}\n                treeName={getTreeName('red', this.props.commander)}\n                data={this.props.red}\n                mouseX={this.state.redX}\n                mouseY={this.state.redY}\n                isEmbed={this.props.isEmbed}\n              />\n              <Tree\n                {...sharedTreeProps}\n                color={'yellow'}\n                treeName={getTreeName('yellow', this.props.commander)}\n                data={this.props.yellow}\n                mouseX={this.state.yellowX}\n                mouseY={this.state.yellowY}\n                isEmbed={this.props.isEmbed}\n              />\n              <Tree\n                {...sharedTreeProps}\n                color={'blue'}\n                treeName={getTreeName('blue', this.props.commander)}\n                data={this.props.blue}\n                mouseX={this.state.blueX}\n                mouseY={this.state.blueY}\n                isEmbed={this.props.isEmbed}\n              />\n              <Hexagon\n                calcPointsSpent={this.props.calcPointsSpent}\n                isShownTotals={this.props.isShownTotals && this.props.commander}\n                commander={this.props.commander || 'unknown'}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default TreePanel;\n"],"sourceRoot":""}